# 要件定義書

## 1. プロジェクト名称

### 就職決定済若年層向け 引越し最適化支援 Web アプリ（仮称：引越しレンズ）

## 2. プロジェクト概要

本プロジェクトは、就職先がすでに決まっている若年層を対象に、勤務地を前提とした「住む場所選び」を、複数の観点（通勤時間・家賃・治安・ライフスタイルなど）から最適化・推薦する Web アプリケーションの開発を通じて、以下の分野の技術的理解を深めることを目的とする。

**対象地域**: 関西圏（大阪府、京都府、兵庫県）に限定（将来的には日本全国に拡大予定）

### 主要技術分野

- 数理最適化
  - 駅毎の通勤時間
  - 駅周辺の家賃
  - 駅周辺の物価(可能であれば)
    に基づきユーザーの指定したプライオリティを基準に最適化
- pandas
- pulp

## 3. ターゲットユーザー

- 20〜30 代前半の新卒・第二新卒などの若年層
- 関西圏（大阪府、京都府、兵庫県）へ転居を伴って就職する層(将来的には全国展開を予定)
- 就職先の勤務地は確定済み

## 5. 想定機能一覧

以下の Notion ページを参照してください。
<https://www.notion.so/2019b9a49fc8800eb672ef98cc9a93ac?pvs=4>

## 6. データ要件

以下の Notion ページを参照してください。
<https://www.notion.so/2009b9a49fc8808e9cc3e3ebaafd2050?pvs=4>

## 7. システム構成

### 技術スタック

- **フロントエンド**: Next.js + Tailwind CSS
- **バックエンド**: Python (FastAPI 予定) + pulp (最適化)
- **データベース**: MongoDB
- **データ処理**: Pandas, NumPy
- **可視化**: Mapbox , Plotly

### 開発環境

- Docker コンテナによる開発環境の統一
- docker-compose による各サービス（フロントエンド、バックエンド、データベース）の管理
- CI/CD パイプラインでの Docker イメージのビルドと配布

### データ更新

- データ更新頻度: 1 ヶ月に 1 回
- 管理者による手動データ更新機能あり

## 8. スケジュール

| フェーズ             | 期間   | 内容                                                                      | 学習内容の観点                       |
| -------------------- | ------ | ------------------------------------------------------------------------- | ------------------------------------ |
| P1: 調査・データ収集 | 2 日間 | 各指標・データセットの選定                                                | オープンデータの探索と前処理         |
|                      |        | - [x] 既存データの確認と理解 (国土数値情報、e-Stat など)                  |                                      |
|                      |        | - [x] 不動産情報サイトの利用規約確認 (SUUMO, HOMES など)                  |                                      |
|                      |        | - [x] 治安情報、生活利便施設情報のデータソース調査・特定                  |                                      |
|                      |        | - [] 各データソースからのサンプルデータ取得と形式確認                     |                                      |
|                      |        | - [] データ収集計画の策定 (収集対象、優先順位、収集方法)                  |                                      |
| P2: スコア設計       | 3 日間 | 各要素の正規化と加重平均スコア                                            | 多変量解析・情報設計                 |
|                      |        | - [ ] 収集データに基づいた評価指標の洗い出し                              |                                      |
|                      |        | - [ ] 各指標の正規化手法の検討・決定                                      |                                      |
|                      |        | - [ ] 指標間の重み付けロジックの検討 (ユーザー優先度をどう反映させるか)   |                                      |
|                      |        | - [ ] スコアリングアルゴリズムのプロトタイプ作成と検証 (Jupyter Notebook) |                                      |
| P3: モデル構築       | 4 日間 | 最適化・推薦・回帰・クラスタリング                                        | 機械学習・数理最適化・因果推論の実装 |
|                      |        | - [ ] 最適化モデルの設計 (pulp を使用)                                    |                                      |
|                      |        | - [ ] 目的関数、制約条件の定義                                            |                                      |
|                      |        | - [ ] データの入力形式、出力形式の定義                                    |                                      |
|                      |        | - [ ] モデルの実装 (Python)                                               |                                      |
|                      |        | - [ ] テストデータを用いたモデルの動作検証                                |                                      |
|                      |        | - [ ] (オプション) 推薦ロジック、回帰・クラスタリングモデルの検討・実装   |                                      |
| P4: 可視化・UX 設計  | 3 日間 | UI 設計と地図ベースの表示                                                 | HCI、インタラクション設計            |
|                      |        | - [ ] 主要画面のワイヤーフレーム作成                                      |                                      |
|                      |        | - [ ] UI コンポーネントの設計 (Next.js, Tailwind CSS)                     |                                      |
|                      |        | - [ ] 地図表示機能のプロトタイプ作成 (Mapbox)                             |                                      |
|                      |        | - [ ] 推薦結果の表示方法検討 (スコア、通勤時間、家賃など)                 |                                      |
|                      |        | - [ ] ユーザーテストシナリオ作成                                          |                                      |
| P5: 統合・検証       | 2 日間 | 全機能統合と検証                                                          | モデルの統合と評価方法               |
|                      |        | - [ ] バックエンド API とフロントエンドの結合テスト                       |                                      |
|                      |        | - [ ] エンドツーエンドテストの実施                                        |                                      |
|                      |        | - [ ] パフォーマンステスト (主要画面の表示速度、API レスポンスタイム)     |                                      |
|                      |        | - [ ] ユーザーテスト実施とフィードバック収集                              |                                      |
|                      |        | - [ ] バグ修正と最終調整                                                  |                                      |

**注**: 全体開発期間は 2 週間（14 日間）で集中的に開発を行う想定

## 9. 成果物

- Web アプリのプロトタイプ
- 分析モデルの Jupyter Notebook
- 学習成果をまとめたレポート or 技術解説文書

## 10. 今後の発展性

- 不動産業界や人材業界との連携サービス（企業別に最適な居住地推薦）
- 家族構成・テレワーク比率などに応じた拡張
- 地方移住や 2 拠点生活支援などの応用
- **対象地域の全国展開**：関西圏から順次、首都圏、中部圏、その他地域へと対象を拡大
- **地域特性データの拡充**：各地域の特性（文化、気候、など）を考慮した推薦機能の追加

## 11. 非機能要件

### セキュリティ・プライバシー

- ユーザーの個人情報（氏名・住所など）は収集しない設計を徹底する。
- 勤務地情報は最寄り駅レベルで一般化して保存し、個人が特定できないように配慮する。
- **パスワードなどの機密情報は適切にハッシュ化（例：Argon2、bcrypt）して保存する。**
- **通信は全て HTTPS で暗号化する。**
- **依存ライブラリの脆弱性スキャンを定期的に実施する (例: Snyk, Dependabot)。**
- **SQL インジェクション、XSS (クロスサイトスクリプティング) などの一般的なウェブ脆弱性対策を講じる。**

### パフォーマンス

- **主要画面（地図表示、検索結果一覧、物件詳細）の表示時間は平均 3 秒以内、最大 5 秒以内を目指す。**
- 同時接続ユーザー数は、通常時 50 ユーザー、ピーク時 100 ユーザー程度まで対応可能とする。
- **API レスポンスタイムは、95 パーセンタイルで 500 ミリ秒以内を目指す。**

### リスク管理

### API・データ取得コスト対策

- Google Maps API などの有料 API 呼び出し回数を制限（キャッシュ活用）
- API 呼び出し上限アラートの設定
- バッチ処理による一括データ取得の実施（リアルタイム処理の最小化）
- 開発環境ではモックデータを優先使用

### 開発リスク対策

- 機能のプライオリティ付けによる MVP（Minimum Viable Product）の早期実現
- 外部 API 依存度の高い機能は代替手段を検討
